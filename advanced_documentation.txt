BAM Announcements Manager — Version 2.0 - BETA VERSION: 

This document contains additional technical documentation on some of BAM's internal functionality. Refer to this documentation if you experience specific compatibility issues other plugins, or experience issues with the URL parser functionality. 

----------------------------------------------------
MAKING ANNOUNCEMENTS DISPLAY ON SPECIFIC PAGES: 
----------------------------------------------------

   - This is a brand new feature in BAM 2.0! This gives quite a bit of granularity on where announcements will be posted. You can make them display only on a specific user’s profile, or on a specific forum board, or on a specific thread, for example. 
   - When this setting is used, your announcement will ONLY display on these pages. Global announcement settings are ignored. 
   - The vast majority of pages on your forum will work simply by pasting the URL into the "Additional display pages" setting. Although this is a beta feature, it works very well for most common pages on the forum, and has been tested extensively. 
   - There are certain pages where announcements won't display, or where the URL won't parse quite like you might expect. Many very obscure pages (such as the login redirect page) will not display announcements, for example. Most of these situations are documented below. If you have any issues with this setting, please refer to the steps below. 

---------------------------------------------------------------------------------
TECHNICAL DETAILS ON THE ADVANCED MODE PARSER (READ IF YOU ENCOUNTER ANY ISSUES): 
---------------------------------------------------------------------------------

The URL parser works differently than it might seem at first glance. It does considerable work under-the-hood to make sure that it blocks out rogue URLs, properly converts PIDs to TIDs, etc. 

As such, MyBB does not necessarily "see" your page's URL when you visit a page as a full URL. Instead, it sees individual parameters that tell it what to do and what to display. Some of these parameters are very important. Others are much more minor or extraneous altogether. In any case, MyBB creates your page by displaying and executing the correct code, depending on which parameters (or building blocks) are present in your URL. 

In general, this improves functionality rather than introducing bugs. If, for example, you give a URL of http://makestation.net/member.php?action=profile&uid=3, BAM will know that you need the announcement to display specifically, and exclusively, on a single user's profile. However, if you give BAM the URL of http://makestation.net/member.php?action=profile, BAM will see that a user ID is not in the URL, and then display the announcement on all user profiles. 

This functionality works in exactly the same manner on almost every section of your forum. For example, if you want announcements to display only on one specific board/forum on your community, you would copy/paste a URL that looks like this: http://makestation.net/forumdisplay.php?fid=18 .  BAM would see that forumdisplay.php has an additional 'fid=18' parameter, and correctly assume that announcements should only be displayed on board ID 18. 

In general, this works exactly like you would expect. Simply paste the link to the page that you need the announcement to display on, and BAM will do the rest. 

----------------------------------------------------
WHEN THE LINK FUNCTIONALITY WORKS DIFFERENTLY: 
----------------------------------------------------

Because of the way that BAM parses the links that it is given, it may see certain links differently than might be expected. A perfect example of this would be displaying an announcement on "forumdisplay.php". If this page were to be visited without any additional URL parameters, MyBB would return an error page. MyBB refuses to display a forum/board if it doesn't know what board to display. 

BAM sees this page differently. It will see that there are no parameters, and will conclude that it should display the announcement on ALL forums/boards. This might seem like a bug, but this is explicitly not a bug, and is exactly how BAM was designed to see these URLs. If BAM parsed these URLs literally as a full-text match link (rather than by parsing them as it does), there would be some general functionality that would be lost. 

----------------------------------------------------
THINGS BAM EXPLICITLY IGNORES: 
----------------------------------------------------

There are specific parameters that BAM explicitly does not parse. These omissions are not bugs, and they serve to make BAM behave in a way that is more consistent with how it would be expected to operate. Some of these fields include: 

 - Page numbers. You can display an announcement on a specific thread, but you cannot make an announcement display only on a certain page of that thread. (If this functionality was enabled, extraneous, unnecessary page numbers that sometimes end up in the URL would confuse BAM and cause it to parse only on a specific page in some cases, even when this behavior is unintended.)

 - Login and redirect pages. (Not supported at all, as the templates don't allow it)

 - Specific search queries. (You can put announcements on the search page, but they will display for all search queries.) 

 - Post IDs (pid). (These are technically supported, but BAM will convert them to the thread ID that they represent and parse them as normal. BAM does some under-the-hood work to handle these, as MyBB sometimes links to PIDs instead of thread IDs. ) 

----------------------------------------------------
THINGS BAM EXPLICITLY PARSES: 
----------------------------------------------------

 - Any page's .php filename. If the ONLY thing in this field is this filename (such as portal.php, forumdisplay.php, etc.), BAM will display your announcement on EVERY page that includes this filename. This, for example, is how you can display announcements only on the portal, or on all boards.
 
 - any fid (forum/board ID), tid (thread ID), uid (user ID), gid (group ID), or action (usually a page). 

EXAMPLES: 

- forumdisplay.php?fid=2                  Displays only if the user is visiting a specific board (in this case, fid 2)
- forumdisplay.php 			  Displays on all boards. 
- member.php?action=profile&uid=15        Displays on a specific user’s profile (UID 15). (Disclaimer: Not responsible for any forum drama. )
- member.php?action=profile               Displays on ALL user profiles
- usercp.php                              Displays on the user control panel
- member.php?action=register              Displays on the registration page
- memberlist.php                          Displays on the Memberlist    
- showthread.php?tid=947.                 Display only on a specific thread (in this case, thread 947)

In general, you can simply copy/paste a link to the page, and BAM will parse it correctly. These are just a few examples of some that are tested, and many others will work! If you have any issues with this setting, please refer to the documentation above, and report the issue if you feel that there is a bug! 

Handling PIDs: MyBB sometimes contains thread URLs that lack a TID, containing only a PID instead. When this occurs, MyBB directs the user to a specific post in a thread, but otherwise generates the entire thread as normal and internally converts the PID to the associated TID. BAM converts these similarly, and will display your announcement on the corresponding thread as normal, even if the URL lacks a thread ID parameter.


----------------------------------------------------
DISPLAYING ON MULTIPLE PAGES: 
----------------------------------------------------

If you need to define more than one page, this is possible by separating URLs with a comma. The URL parser will display the announcement on all pages that are valid. 

----------------------------------------------------
GOOGLE SEO PLUGIN SUPPORT: 
----------------------------------------------------

This is currently unsupported in this release. This is a known omission because supporting SEO URLs would require a complete, ground-up rewrite of the entire BAM URL parser. This is somewhat beyond my technical expertise at this time, and will be time-consuming to implement in a future release. 

However, this is a planned feature, and if anyone has some technical knowledge or guidance on how to get this working, please reach out! BAM is fully open-source, and as such, I am fully interested and willing to collaborate with the MyBB developer community as a whole in order to bring Google SEO support to BAM. 

In the meantime, if you need to get this working, you can manually put in the non-rewritten URLs into this field to get it working with this plugin. The best way to do this is to look at how the URLs are structured on a forum that does not have this plugin installed. If you can provide the UID (user ID), TID (thread ID), action, or other parameter values and create a proper, un-rewritten URL, BAM will see these properly and parse them as normal. 

I will provide support on http://makestation.net, or on the MyBB community support forums if you absolutely need to get this working. I cannot guarantee that this will work for all cases, as this is entirely unsupported in this release of BAM. Please stay tuned for a future release!

-----------------------------


VARIABLES AND DIRECTIVES: 
Place any of the following in your announcement to have BAM replace it with its value. 

	{username}     		Parses to the current user's username (or Guest, if not registered)
	{newestmember}     	Parses to the username of the most recently registered member. 
	{newestmember_uid}	Parses to the UID of the most recent member. 
	{newestmember_link}	Creates a link to the newest registered member. 
	{threadreplies}		Only on showthread.php. Shows how many replies the current thread has. 
	{countingthread}	For your forum games/counting thread. Parses to the CORRECT count based on the last 10 posts, regardless of whether your users get off track by accident (highly experimental feature. Only works on threads where a consecutive number is generally posted on every reply).

 
DISPLAYING ANNOUNCEMENTS ON SPECIFIC THEMES:

    - This feature was implemented by request in BAM 2.0 as an “unofficial feature” to avoid cluttering the announcement settings. To use this feature, you must put a tag in your announcement with the theme IDs to display your announcement on. 

Theme tag: “[@themes: 1, 2, 3]”

If this tag  (without the quotes) is present anywhere in your announcement’s text, it will ONLY be displayed on themes 1, 2, 3, for example. To get your theme’s ID,  you will need to visit the theme within the Admin Control Panel, and look for “tid=“ in the URL. This will show the theme ID for any specific theme. 

DISPLAYING ANNOUNCEMENTS ON SPECIFIC LANGUAGES: 

   - Similarly to the theme tag feature, BAM+ 2.0 now supports language tags. If this tag is put anywhere in your announcement’s text, the announcement will be displayed only on languages 1 and 2. 
 
[@languages:english, espanol] 

Both theme tags and language tags are internal directives for BAM, and are removed from announcements before being displayed. Although they are displayed on the management panel, users will not be able to see these tags on your forum! 

OTHER DIRECTIVES:

[@disabled]      		 -- Disables an announcement without deleting it. 
[@template:custom_template]      -- Selects a different template for this announcement. 

If you use custom templates, you must define this template in your forum's global templates. Please note that using custom templates may break features such as announcement dismissals and date functionality. 

It is strongly recommended to copy/paste the normal bam_announcement template (in global templates) into a new template, and to modify this template accordingly. This will preserve all of the standard variables required for handling normal announcement dismissals. 

---------------------------------

RANDOM MODE:

     - BAM announcements manager includes random mode, which is now enabled by default. When enabled, BAM handles two categories of announcements. Standard announcements are persistent and always displayed. Random mode announcements are displayed below standard announcements, and are selected randomly. 
    - Random mode announcements handle dismissals differently. They can be closed, but they cannot be dismissed. If the page is refreshed, another random announcement will display. There is a setting available to disable random mode dismissals entirely, if desired. 
    - If you previously used BAM 1.0 to handle random announcements, BAM 2.0 now has an updated and improved ACP interface for managing them. Random announcements now exist on their own page, and are now completely separate from standard announcements. You no longer need to pin announcements to define them as standard announcements. The new functionality should be significantly less confusing and much easier to use. 

GLOBAL ANNOUNCEMENTS:

   - Global announcements are now handled on a per-announcement basis. 
   - Pinned announcements (BAM 1.0) are deprecated, and thus no longer global by default. Simply set each individual announcement as global to make them display on all pages of your forum. 
    - Global announcements do not affect random mode, nor do they affect announcements that are configured to display on specific pages (advanced mode). Only standard announcements will be displayed globally if configured to do so. (This is an improvement over BAM 1.0, where it was previously impossible to manage both random and global announcements in this manner.)
  
ORDERING ANNOUNCEMENTS: 

   - Announcements are assigned a display order by default when adding a new announcement. You can edit these display orders on the announcements management index. Note that Sticky (non-dismissible) announcements are always displayed first, regardless of their display order. If you have multiple stickied announcements, sticky announcements will be displayed first by their display orders, and non-sticky announcements will then be displayed by their display orders. 

ADDING CUSTOM STYLES/COLORS: 

  - By default, BAM comes with six color styles, and two of these are new styles that come with BAM+. You can add additional styles easily by defining the background color and border color in a new class. Other properties of the announcement layout (padding, etc.) are defined by a global class used by all announcements. You can place your custom style classes in the Custom CSS field in your plugin settings. Once you have saved your custom CSS classes, simply define the "custom class" field when creating announcements to use your new custom color style!

  Example: 
    
    .bam_announcement.aqua {
       border: 1px solid #0399C9;
       background-color: #BFFAFF;
    }

  You will now be able to use "aqua" in the custom class field. 


Copyright: 

   This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
